{% extends "base.html" %}
{% block title %}Form {{ form_no }} Â· GÃ¶rev TanÄ±mÄ± ve Yeri{% endblock %}

{% block steps %}
<div class="step-indicator">
    {% for step in FORM_STEPS %}
        <div class="step {{ 'active' if loop.index0 == step_index else '' }} {{ 'complete' if loop.index0 < step_index else '' }}">
            <span class="step-number">{{ loop.index }}</span>
            <span class="step-title">{{ step.title }}</span>
        </div>
    {% endfor %}
</div>
{% endblock %}

{% block content %}
<h2>ğŸ—ºï¸ GÃ¶rev TanÄ±mÄ± ve Yeri</h2>

{% if responsible_name %}
<div class="assignment-info-card" role="note">
    <div class="assignment-info-card__icon" aria-hidden="true">â„¹ï¸</div>
    <div class="assignment-info-card__content">
        <div class="assignment-info-card__title">GÃ¶rev Sorumlusu</div>
        <p class="assignment-info-card__name">{{ responsible_name }}</p>
        <p class="assignment-info-card__note">(6. adÄ±mÄ± dolduracak kiÅŸi)</p>
    </div>
</div>
{% endif %}

<form method="post" action="{{ url_for('form_wizard', form_no=form_no, step=step_index) }}" class="form-card form-scroll">
    <input type="hidden" name="action" value="next">
    <fieldset class="form-fields" {% if read_only_step %}disabled{% endif %}>
        <div class="stacked">
            <div class="form-row">
                <label for="gorev_tanimi">GÃ¶revin TanÄ±mÄ±</label>
                <textarea id="gorev_tanimi" name="gorev_tanimi" rows="8" placeholder="GÃ¶revin kapsamÄ±nÄ± ayrÄ±ntÄ±lÄ± ÅŸekilde yazÄ±nÄ±z">{{ form_data.get('gorev_tanimi', '') }}</textarea>
            </div>
            <div class="form-row">
                <label for="gorev_yeri">GÃ¶rev Yeri</label>
                <textarea id="gorev_yeri" name="gorev_yeri" rows="6" placeholder="GÃ¶rev konumu ve saha bilgilerini yazÄ±nÄ±z">{{ form_data.get('gorev_yeri', '') }}</textarea>
            </div>
            <div class="grid grid-3">
                <div class="form-row">
                    <label for="gorev_il">GÃ¶rev Ä°li <small>(opsiyonel)</small></label>
                    <input id="gorev_il" name="gorev_il" type="text" value="{{ form_data.get('gorev_il', '') }}" placeholder="Ã–rn. Ä°stanbul">
                </div>
                <div class="form-row">
                    <label for="gorev_ilce">GÃ¶rev Ä°lÃ§esi <small>(opsiyonel)</small></label>
                    <input id="gorev_ilce" name="gorev_ilce" type="text" value="{{ form_data.get('gorev_ilce', '') }}" placeholder="Ã–rn. AtaÅŸehir">
                </div>
                <div class="form-row">
                    <label for="gorev_firma">Ziyaret Edilen Firma / Lokasyon <small>(opsiyonel)</small></label>
                    <input id="gorev_firma" name="gorev_firma" type="text" value="{{ form_data.get('gorev_firma', '') }}" placeholder="Ã–rn. Delta Proje Åantiyesi">
                </div>
            </div>
        </div>
    </fieldset>
    {% if is_employee and read_only_step %}
    <div class="form-actions single">
        <a class="button primary" href="{{ url_for('form_wizard', form_no=form_no, step=5) }}">GÃ¶rev Bilgilerini Doldur â†’</a>
    </div>
    {% else %}
    <div class="form-actions">
        <button type="submit" class="button secondary" data-action="submit-step" data-value="previous">â† Geri</button>
        <button type="submit" class="button save" data-action="submit-step" data-value="save">ğŸ’¾ Kaydet</button>
        <button type="submit" class="button primary" data-action="submit-step" data-value="next">Ä°leri â†’</button>
    </div>
    {% endif %}
</form>

{% endblock %}
