{% extends "base.html" %}
{% block title %}Form {{ form_no }} Â· Avans ve AraÃ§ Bilgileri{% endblock %}

{% block steps %}
<div class="step-indicator">
    {% for step in FORM_STEPS %}
        <div class="step {{ 'active' if loop.index0 == step_index else '' }} {{ 'complete' if loop.index0 < step_index else '' }}">
            <span class="step-number">{{ loop.index }}</span>
            <span class="step-title">{{ step.title }}</span>
        </div>
    {% endfor %}
</div>
{% endblock %}

{% block content %}
<h2>ğŸ’¼ Avans ve AraÃ§ Bilgileri</h2>
<form method="post" action="{{ url_for('form_wizard', form_no=form_no, step=step_index) }}" class="form-card">
    <input type="hidden" name="action" value="next">
    <div class="grid grid-2">
        <div class="form-row">
            <label for="avans">Avans TutarÄ±</label>
            <input id="avans" name="avans" type="text" value="{{ form_data.get('avans', '') }}" placeholder="Ã–rn. 1500 TL">
        </div>
        <div class="form-row">
            <label for="taseron">TaÅŸeron Åirket</label>
            <select id="taseron" name="taseron">
                <option value="">SeÃ§iniz</option>
                {% for option in taseron_options %}
                    <option value="{{ option }}" {% if form_data.get('taseron') == option %}selected{% endif %}>{{ option }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-row">
            <label for="arac_plaka">AraÃ§ Plaka No</label>
            {% set current_value = form_data.get('arac_plaka', '') %}
            <select id="arac_plaka" name="arac_plaka">
                <option value="">Bir araÃ§ seÃ§in</option>
                {% for option in arac_plaka_options %}
                    <option value="{{ option }}" {{ 'selected' if option == current_value else '' }}>{{ option }}</option>
                {% endfor %}
                {% if current_value and current_value not in arac_plaka_options %}
                    <option value="{{ current_value }}" selected>{{ current_value }}</option>
                {% endif %}
            </select>
        </div>
    </div>
    <div class="form-actions">
        <button type="submit" class="button secondary" data-action="submit-step" data-value="previous">â† Geri</button>
        <button type="submit" class="button save" data-action="submit-step" data-value="save">ğŸ’¾ Kaydet</button>
        <button type="submit" class="button primary" data-action="submit-step" data-value="next">Ä°leri â†’</button>
    </div>
</form>
{% endblock %}
